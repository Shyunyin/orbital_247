<!DOCTYPE html>
<html>

<head>
    <title>Main Schedule Page</title>
    <link rel="stylesheet" href="main_schedule.css" />
    <script type="text/javascript" type="module" src="main_schedule.js"></script>
    <!--Importing script for icons -->
    <!-- <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Signika+Negative:wght@600&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <!-- Main division for the background-->
    <div id="background">
        <div class="btn-group">
            <button class="button">Schedule</button>
            <button class="button" onclick="statistics()">Statistics</button>
            <button class="button" onclick="routine()">Routine</button>
        </div>
        <div class="main"></div>
    </div>

    <!--Heading content using javascript-->
    <div id="heading">
        <input type="text" id="currentDate" readonly="readonly" onfocus="this.blur()">
        <div id="currentTime"></div><!-- <input type="text" id="currentTime" readonly="readonly" onfocus="this.blur()"> -->
        <input type="text" id="currentUser" readonly="readonly" onfocus="this.blur()">
        <input type="text" id="currentSchedule" readonly="readonly" onfocus="this.blur()">
    </div>

    <!--Just a stand in rectangle for the progress bar-->
    <div id="progress">
        <input type="text" id="progressBar" readonly="readonly" value="Progress Bar" onfocus="this.blur()">
    </div>

    <!--Stand in for schedule-->
    <div id="schedule">
        <!--For FIXED ROUTINE TASK-->
        <div id="container">
            <input type="text" id="itemTime" value="08:00-09:00" readonly="readonly">
            <input type="text" id="itemName" value="Get ready for school" readonly="readonly">
        </div> 
        <!--For FIXED TASK-->
        <div id="fixed">
            <input type="text" id="fixedItemTime" value="09:00-11:00" readonly="readonly">
            <button id="selectFixedItem" onclick="tempFixed()">Group Meeting</button> <!--To create in javascript use: InnerHTML-->
        </div>
        <!--For NON-FIXED TASK-->
        <div id="nonFixed">
            <input type="text" id="nonFixedItemTime" value="11:00-12:00" readonly="readonly">
            <button id="selectNonFixedItem" onclick="tempNonFixed()">Test1</button>
        </div>
    </div>

    <!--For array of tasks-->
    <div id="postit">
        <input type="text" id="title" readonly="readonly" value="Tasks not included in schedule yet">
        <br>
        <div id="postitContent">
        </div>
    </div>

    <!--For the instructions on how to perform actions on tasks-->
    <div id="instruction">
        <!--For the background box-->
    </div>
    <div class="instruction">
        <h3>Click on any task to</h3>
        <h3>start, reschedule,</h3>
        <h3> edit or delete a task</h3>
    </div>

    <div class="actions"> 
        <h3>Actions:</h3>
        <div id="iconActions">
        </div>
    </div>

    <!--Add task pop-out-->
    <button type="button" id="addTask" name="addTask">+</button>
    <input type="button" id="addTask" value="+" onclick="OpenPopupWindow()";>


    <!--Link to pop up for add daily task page-->
    <button id="generateSchedule" name="generateSchedule" onclick="clearPostit()">Generate Schedule now!</button>

    <!--Buttons to go to previous and next-->
    <!--Probably must create previous button using javascript as it only appears if schedule day != current day-->
    <button type="button" id="nextDay" name="nextDay"></button>
    <div id="textNextDay">Go to Next day's schedule</div>

    <script>
         //------------------Defining of variables------------------//
         //--------------- Configuration --------------------------//
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
        apiKey: "AIzaSyBtFGTnYwEU5OgIa4SpKvMaGAa1ofEjs3U",
        authDomain: "orbital-24-7.firebaseapp.com",
        databaseURL: "https://orbital-24-7-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "orbital-24-7",
        storageBucket: "orbital-24-7.appspot.com",
        messagingSenderId: "459091456870",
        appId: "1:459091456870:web:21134477e94d50e25ecea7",
        measurementId: "G-WQMCMBMFCK"
        };

        firebase.initializeApp(firebaseConfig);
        let cloudDB = firebase.firestore();
        //--------------------- Writing relevant functions ------------------//
        function Add_Doc_WithID() {
            cloudDB.collection("OneTimeTasks").doc(nameOfTask).set(
                {
                    taskName : String(nameOfTask),
                    taskCategory : Number(categoryNum),
                    date: String(dateInput), //in the form "yyyy-mm-dd"
                    type: String(check()), //to store if its fixed or non-fixed also
                    startTime : Array(Number(startArr[0]), Number(startArr[1])), //fixed
                    endTime : Array(Number(endArr[0]), Number(endArr[1])), //fixed
                    durationHour: Number(hour), //non-fixed
                    durationMinute: Number(minute), //non-fixed
                    numSessions : Number(numSessions), //1,2 or 3 non-fixed
                    followTask: String(followUpTask), //no: null; yes: taskName of the followed task
                    sequenceLabel: String(sequence) //no: null; yes: before or after
                }
            ).then(function(){
                console.log("Doc written with ID " , nameOfTask);
            })
            .catch(function(error) {
                console.error("Error adding doc", Error);
            });
        }
        //--------------------- Retrieving relavant information from database ------------------//
    </script>
</body>

</html>